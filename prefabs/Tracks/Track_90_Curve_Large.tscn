[gd_scene load_steps=9 format=3 uid="uid://bknekykd6qsdk"]

[ext_resource type="Script" path="res://scripts/Track.gd" id="1_mlf3p"]
[ext_resource type="Texture2D" uid="uid://dyk30b1nt2gvq" path="res://assets/crosstie.png" id="2_u1ttr"]
[ext_resource type="PackedScene" uid="uid://btfdanletw1gi" path="res://prefabs/TrackJunction.tscn" id="3_dbgdd"]
[ext_resource type="PackedScene" uid="uid://iw1demrx5nvt" path="res://prefabs/SignalButton.tscn" id="4_ijhon"]
[ext_resource type="Texture2D" uid="uid://dlgfnj8p01ym4" path="res://assets/track.png" id="5_8gp8p"]

[sub_resource type="Curve2D" id="Curve2D_asyaa"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, -136, 0, 0, 0, 0, 0, -128, 0, -63.7489, -64.5039, 63.7489, 64.5039, 64, 64, 0, 0, 0, 0, 128, 256, 0, 0, 0, 0, 128, 264)
}
point_count = 5

[sub_resource type="ArrayMesh" id="ArrayMesh_hmeh0"]
_surfaces = [{
"2d": true,
"aabb": AABB(-1.5, -13.5, 0, 3.00001, 27, 0),
"attribute_data": PackedByteArray(0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 0, 0),
"format": 33558545,
"index_count": 6,
"index_data": PackedByteArray(3, 0, 0, 0, 1, 0, 1, 0, 2, 0, 3, 0),
"primitive": 3,
"vertex_count": 4,
"vertex_data": PackedByteArray(0, 0, 192, 63, 0, 0, 88, 65, 0, 0, 192, 191, 0, 0, 88, 65, 0, 0, 192, 191, 0, 0, 88, 193, 0, 0, 192, 63, 0, 0, 88, 193)
}]

[sub_resource type="MultiMesh" id="MultiMesh_nb77j"]
resource_local_to_scene = true
instance_count = 43
mesh = SubResource("ArrayMesh_hmeh0")
buffer = PackedFloat32Array(0.99999, -0.00447102, 0, -131, 0.00447102, 0.99999, 0, 0, 0.99909, -0.0426574, 0, -121.002, 0.0426574, 0.99909, 0, 0.153322, 0.997582, -0.0695048, 0, -111.015, 0.0695048, 0.997582, 0, 0.653656, 0.995641, -0.0932723, 0, -101.044, 0.0932723, 0.995641, 0, 1.41022, 0.993185, -0.116547, 0, -91.0934, 0.116547, 0.993185, 0, 2.40264, 0.990199, -0.139662, 0, -81.1684, 0.139662, 0.990199, 0, 3.623, 0.986696, -0.162577, 0, -71.2746, 0.162577, 0.986696, 0, 5.07507, 0.982471, -0.186415, 0, -61.4184, 0.186415, 0.982471, 0, 6.76295, 0.977158, -0.212514, 0, -51.6064, 0.212514, 0.977158, 0, 8.69108, 0.971289, -0.237902, 0, -41.8489, 0.237902, 0.971289, 0, 10.8787, 0.963668, -0.267104, 0, -32.1547, 0.267104, 0.963668, 0, 13.3308, 0.955169, -0.296062, 0, -22.5385, 0.296062, 0.955169, 0, 16.073, 0.944509, -0.328487, 0, -13.0112, 0.328487, 0.944509, 0, 19.1096, 0.931989, -0.362486, 0, -3.59682, 0.362486, 0.931989, 0, 22.4797, 0.917311, -0.398172, 0, 5.68769, 0.398172, 0.917311, 0, 26.1921, 0.898758, -0.438446, 0, 14.8187, 0.438446, 0.898758, 0, 30.2676, 0.877306, -0.479932, 0, 23.7542, 0.479932, 0.877306, 0, 34.7549, 0.851942, -0.523637, 0, 32.4661, 0.523637, 0.851942, 0, 39.6616, 0.820015, -0.572342, 0, 40.9129, 0.572342, 0.820015, 0, 45.0117, 0.783383, -0.621539, 0, 49.0239, 0.621539, 0.783383, 0, 50.8579, 0.740775, -0.671754, 0, 56.7546, 0.671754, 0.740775, 0, 57.1975, 0.688514, -0.725223, 0, 64.0412, 0.725223, 0.688514, 0, 64.0429, 0.638634, -0.769511, 0, 70.8005, 0.769511, 0.638634, 0, 71.4096, 0.59006, -0.807359, 0, 77.0638, 0.807359, 0.59006, 0, 79.2024, 0.540678, -0.84123, 0, 82.8418, 0.84123, 0.540678, 0, 87.3622, 0.496784, -0.867874, 0, 88.137, 0.867874, 0.496784, 0, 95.8435, 0.455424, -0.890274, 0, 92.9996, 0.890274, 0.455424, 0, 104.58, 0.414387, -0.910101, 0, 97.4523, 0.910101, 0.414387, 0, 113.533, 0.378385, -0.925648, 0, 101.505, 0.925648, 0.378385, 0, 122.674, 0.344737, -0.938699, 0, 105.203, 0.938699, 0.344737, 0, 131.965, 0.311297, -0.950313, 0, 108.566, 0.950313, 0.311297, 0, 141.381, 0.28205, -0.9594, 0, 111.605, 0.9594, 0.28205, 0, 150.908, 0.253762, -0.967267, 0, 114.356, 0.967267, 0.253762, 0, 160.522, 0.226935, -0.97391, 0, 116.822, 0.97391, 0.226935, 0, 170.212, 0.201515, -0.979485, 0, 119.03, 0.979485, 0.201515, 0, 179.965, 0.177902, -0.984048, 0, 120.984, 0.984048, 0.177902, 0, 189.772, 0.154092, -0.988056, 0, 122.701, 0.988056, 0.154092, 0, 199.624, 0.131261, -0.991348, 0, 124.186, 0.991348, 0.131261, 0, 209.512, 0.109307, -0.994008, 0, 125.444, 0.994008, 0.109307, 0, 219.433, 0.0860082, -0.996294, 0, 126.477, 0.996294, 0.0860082, 0, 229.379, 0.061393, -0.998114, 0, 127.277, 0.998114, 0.061393, 0, 239.347, 0.0309284, -0.999522, 0, 127.821, 0.999522, 0.0309284, 0, 249.332, -4.37114e-08, -1, 0, 128, 1, -4.37114e-08, 0, 259.329)

[node name="Track" type="Path2D"]
curve = SubResource("Curve2D_asyaa")
script = ExtResource("1_mlf3p")

[node name="Crosstie" type="MeshInstance2D" parent="."]
visible = false
position = Vector2(-50, -50)
mesh = SubResource("ArrayMesh_hmeh0")
texture = ExtResource("2_u1ttr")

[node name="MultiMeshInstance2D" type="MultiMeshInstance2D" parent="."]
z_index = 1
multimesh = SubResource("MultiMesh_nb77j")
texture = ExtResource("2_u1ttr")

[node name="HeadPoint" type="PathFollow2D" parent="."]
position = Vector2(-136, 0)
loop = false

[node name="TrackJunction" parent="HeadPoint" instance=ExtResource("3_dbgdd")]
parent = NodePath("../..")
side = 2

[node name="SignalButton" parent="HeadPoint" instance=ExtResource("4_ijhon")]
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_top = -15.0
offset_bottom = 505.0
grow_horizontal = 2
grow_vertical = 2

[node name="TailPoint" type="PathFollow2D" parent="."]
position = Vector2(128, 264)
rotation = 1.5708
progress = 429.671
loop = false

[node name="TrackJunction" parent="TailPoint" instance=ExtResource("3_dbgdd")]
parent = NodePath("../..")
side = 3

[node name="SignalButton" parent="TailPoint" instance=ExtResource("4_ijhon")]
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_top = 15.0
offset_bottom = 535.0
grow_horizontal = 2
grow_vertical = 2
rotation = 1.5708
size_flags_horizontal = 4
size_flags_vertical = 4

[node name="TrackLine" type="Line2D" parent="."]
z_index = 2
points = PackedVector2Array(-136, 0, -132, 0, -128, 0, -126.544, 0.010089, -122.365, 0.104332, -119.342, 0.213001, -115.744, 0.378694, -111.607, 0.613409, -106.965, 0.929139, -104.466, 1.12113, -101.854, 1.33788, -99.1332, 1.58088, -96.3088, 1.85163, -93.3847, 2.15163, -90.3654, 2.48238, -87.2553, 2.84539, -84.0588, 3.24214, -80.7803, 3.67413, -77.4242, 4.14288, -73.995, 4.64988, -70.497, 5.19662, -66.9347, 5.7846, -63.3125, 6.41534, -59.6347, 7.09032, -55.9058, 7.81104, -52.1303, 8.57901, -48.3125, 9.39572, -44.4568, 10.2627, -40.5676, 11.1814, -36.6494, 12.1533, -32.7066, 13.18, -28.7435, 14.2629, -24.7647, 15.4036, -20.7744, 16.6035, -16.7772, 17.8641, -12.7773, 19.187, -8.77936, 20.5736, -4.78763, 22.0254, -0.806566, 23.544, 3.15943, 25.1309, 7.10593, 26.7874, 11.0285, 28.5152, 14.9228, 30.3157, 18.7844, 32.1905, 22.6089, 34.141, 26.3918, 36.1687, 30.1287, 38.2752, 33.8153, 40.4619, 37.4471, 42.7303, 41.0197, 45.082, 44.5287, 47.5184, 47.9697, 50.041, 51.3383, 52.6513, 54.63, 55.3509, 57.8405, 58.1412, 60.9653, 61.0237, 64, 64, 66.942, 67.069, 69.7924, 70.226, 72.5526, 73.4665, 75.2242, 76.7862, 77.8086, 80.1807, 80.3072, 83.6457, 82.7215, 87.1768, 85.0529, 90.7697, 87.3029, 94.4199, 89.4728, 98.1232, 91.5643, 101.875, 93.5786, 105.671, 95.5173, 109.508, 97.3818, 113.38, 99.1736, 117.283, 100.894, 121.213, 102.545, 125.165, 104.127, 129.136, 105.642, 133.12, 107.092, 137.114, 108.478, 141.113, 109.801, 145.112, 111.062, 149.108, 112.265, 153.096, 113.409, 157.072, 114.496, 161.031, 115.527, 164.969, 116.505, 168.881, 117.43, 172.764, 118.305, 176.612, 119.129, 180.422, 119.906, 184.189, 120.636, 187.909, 121.32, 191.577, 121.961, 195.189, 122.56, 198.741, 123.117, 202.228, 123.635, 205.646, 124.115, 208.991, 124.559, 212.258, 124.967, 215.443, 125.342, 218.541, 125.685, 221.549, 125.996, 224.461, 126.279, 227.274, 126.533, 229.982, 126.762, 232.583, 126.965, 235.071, 127.302, 239.691, 127.557, 243.809, 127.74, 247.389, 127.865, 250.396, 127.982, 254.552, 128, 256, 128, 260, 128, 264)
width = 20.0
texture = ExtResource("5_8gp8p")
texture_mode = 1
metadata/_edit_lock_ = true

[connection signal="pressed" from="HeadPoint/SignalButton" to="." method="_on_head_signal_button_pressed" flags=18]
[connection signal="pressed" from="TailPoint/SignalButton" to="." method="_on_tail_signal_button_pressed" flags=18]
